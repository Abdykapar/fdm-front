(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-c92a7730"],{"0c61":function(e,t,a){},"0d45":function(e,t,a){e.exports=a.p+"img/delete.9da4aae3.svg"},"11c9":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));a("99af");var s=a("d4ec"),r=a("bee2"),n=a("262e"),i=a("2caf"),o=a("a2a9"),l="http://46.101.136.60:8000/api",c=function(e){Object(n["a"])(a,e);var t=Object(i["a"])(a);function a(){return Object(s["a"])(this,a),t.call(this)}return Object(r["a"])(a,[{key:"getAll",value:function(){var e="".concat(l,"/roles/");return this.sendGetRequest(e)}},{key:"create",value:function(e){var t="".concat(l,"/roles/");return this.sendPostRequest(t,e)}},{key:"getById",value:function(e){var t="".concat(l,"/roles/").concat(e);return this.sendGetRequest(t)}},{key:"update",value:function(e){var t="".concat(l,"/roles/").concat(e.id,"/");return this.sendPutRequest(t,e)}},{key:"delete",value:function(e){var t="".concat(l,"/roles/").concat(e);return this.sendDeleteRequest(t)}}]),a}(o["a"]),u=new c},1671:function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"country home__body"},[s("div",{staticClass:"home__body__head"},[s("span",[e._v("Admin")]),s("button",{staticClass:"flex-align-center",on:{click:e.onCreate}},[s("img",{attrs:{src:a("76a4"),alt:""}}),e._v(" Add new admin ")])]),s("div",{staticClass:"home__body__main"},[s("fdm-table",[s("template",{slot:"head"},[s("tr",[s("th",{staticClass:"id"},[e._v(" ID ")]),s("th",[e._v("Name")]),s("th",[e._v("Surname")]),s("th",[e._v("Username")]),s("th",[e._v("Email")]),s("th",[e._v("Airline")]),s("th"),s("th")])]),s("template",{slot:"body"},e._l(e.users,(function(t,r){return s("tr",{key:t.id},[s("td",{staticClass:"id"},[e._v(" "+e._s(r+1)+" ")]),s("td",[e._v(e._s(t.first_name))]),s("td",[e._v(e._s(t.last_name))]),s("td",[e._v(e._s(t.username))]),s("td",[e._v(e._s(t.email))]),s("td",[e._v(e._s(t.user_airline.join("")))]),s("td",[s("img",{staticClass:"pointer",attrs:{src:a("daf0"),alt:""},on:{click:function(a){return e.onEdit(t)}}})]),s("td",[s("img",{staticClass:"pointer",attrs:{src:a("0d45"),alt:""},on:{click:function(a){return e.onDelete(t.id)}}})])])})),0)],2)],1),e.isCreate?s("admin-create",{attrs:{"is-edit":e.isEdit,"edit-user":e.user},on:{close:function(t){e.isCreate=!1},fetch:e.fetchUsers}}):e._e(),e.isDelete?s("modal-delete",{on:{close:function(t){e.isDelete=!1},delete:e.deleteUser}}):e._e()],1)},r=[],n=(a("7db0"),a("96cf"),a("1da1")),i=a("5530"),o=a("fa41"),l=a("86a0"),c=a("2f62"),u=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("fdm-modal",{on:{close:function(t){return e.$emit("close")}}},[s("div",{staticClass:"create",attrs:{slot:"content"},slot:"content"},[s("div",{staticClass:"create__head"},[e._v(" "+e._s(e.isEdit?"Edit admin":"Add new admin")+" ")]),s("div",{staticClass:"create__body"},[s("form",{staticClass:"form",on:{submit:function(t){return t.preventDefault(),e.onSubmit(t)}}},[s("div",{staticClass:"flex-gap"},[s("div",{staticClass:"form__row",class:{error:e.errors.has("lastname")}},[s("label",{attrs:{for:"lastname"}},[e._v("Surname")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.last_name,expression:"user.last_name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"lastname",type:"text",name:"lastname"},domProps:{value:e.user.last_name},on:{input:function(t){t.target.composing||e.$set(e.user,"last_name",t.target.value)}}}),e.errors.length?[s("img",{attrs:{src:a("28c3"),alt:""}}),s("span",[e._v("Required field")])]:e._e()],2),s("div",{staticClass:"form__row",class:{error:e.errors.has("firstname")}},[s("label",{attrs:{for:"firstname"}},[e._v("Name")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.first_name,expression:"user.first_name"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"firstname",type:"text",name:"firstname"},domProps:{value:e.user.first_name},on:{input:function(t){t.target.composing||e.$set(e.user,"first_name",t.target.value)}}}),e.errors.length?[s("img",{attrs:{src:a("28c3"),alt:""}}),s("span",[e._v("Required field")])]:e._e()],2)]),s("div",{staticClass:"flex-gap"},[s("div",{staticClass:"form__row",class:{error:e.errors.has("username")}},[s("label",{attrs:{for:"username"}},[e._v("Username")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.username,expression:"user.username"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"username",type:"text",name:"username"},domProps:{value:e.user.username},on:{input:function(t){t.target.composing||e.$set(e.user,"username",t.target.value)}}}),e.errors.length?[s("img",{attrs:{src:a("28c3"),alt:""}}),s("span",[e._v("Required field")])]:e._e()],2),s("div",{staticClass:"form__row",class:{error:e.errors.has("email")}},[s("label",{attrs:{for:"email"}},[e._v("Email")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"email",type:"email",name:"email"},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}}),e.errors.length?[s("img",{attrs:{src:a("28c3"),alt:""}}),s("span",[e._v("Required field")])]:e._e()],2)]),s("div",{staticClass:"flex-gap"},[s("div",{staticClass:"form__row",class:{error:e.errors.has("password")}},[s("label",{attrs:{for:"password"}},[e._v("Password")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"},{name:"validate",rawName:"v-validate",value:{required:!e.isEdit},expression:"{ 'required' : !isEdit }"}],attrs:{id:"password",type:"password",name:"password"},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}}),e.errors.length?[s("img",{attrs:{src:a("28c3"),alt:""}}),s("span",[e._v("Required field")])]:e._e()],2),s("div",{staticClass:"form__row",class:{error:e.errors.has("avatar")}},[s("label",{attrs:{for:"avatar"}},[e._v("Avatar")]),s("input",{directives:[{name:"validate",rawName:"v-validate",value:{required:!1},expression:"{ 'required' : false }"}],staticStyle:{opacity:"0"},attrs:{id:"avatar",type:"file",name:"avatar"},on:{change:e.onFileSelect}}),s("div",{staticClass:"form__row__file flex-center"},[e._v(e._s(e._f("crop")(e.avatar.name||"Choose image")))]),e.errors.length?[s("img",{attrs:{src:a("28c3"),alt:""}}),s("span",[e._v("Required field")])]:e._e()],2)]),s("div",{staticClass:"flex-gap"},[s("div",{staticClass:"form__row",class:{error:e.errors.has("airline")}},[s("label",{attrs:{for:"airline"}},[e._v("Airline")]),s("select",{directives:[{name:"model",rawName:"v-model",value:e.user.airline,expression:"user.airline"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"airline",name:"airline"},on:{change:function(t){var a=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.$set(e.user,"airline",t.target.multiple?a:a[0])}}},e._l(e.airlines,(function(t){return s("option",{key:t.id,domProps:{value:t.id}},[e._v(" "+e._s(t.title)+" ")])})),0)])]),s("div",{staticClass:"form__submit flex-justify-center flex-gap"},[s("button",{attrs:{type:"submit"}},[e._v(" ADD ")]),s("button",{staticClass:"black",attrs:{type:"reset"},on:{click:function(t){return e.$emit("close")}}},[e._v(" DECLINE ")])])])])])])},d=[],f=a("f0c9"),m=a("5bb7"),v=a("11c9"),h=a("1225"),p=a("d59a"),_={name:"AdminCreate",components:{FdmModal:f["a"]},props:{isEdit:{type:Boolean,default:!1},editUser:{type:Object,default:function(){return{}}}},data:function(){return{user:{},avatar:{},airlines:[],roles:[]}},mounted:function(){this.isEdit&&this.fetchUser(),this.fetchAirlines()},methods:Object(i["a"])(Object(i["a"])({},Object(c["b"])("loader",["setLoading"])),{},{fetchUser:function(){var e=this;p["a"].getById(this.editUser.id).then((function(t){e.user=t,e.user.airline=t.airline[0]})).catch((function(t){console.log(t),e.$toastr.e(t)}))},fetchAirlines:function(){var e=this;this.setLoading(!0),m["a"].getAll().then((function(t){return e.airlines=t,v["a"].getAll()})).then((function(t){e.roles=t,e.setLoading(!1)})).catch((function(t){e.setLoading(!1),console.log(t),e.$toastr.e(t)}))},onFileSelect:function(e){this.avatar=e.target.files[0]},onSubmit:function(){var e=this;this.$validator.validate().then((function(t){if(t){var a=e.roles.find((function(e){return"ROLE_ADMIN"===e.code}));if(e.user.avatar=e.avatar,a&&(e.user.role=a.id),e.isEdit)p["a"].update(e.user).then((function(){e.$toastr.s(e.$t("successMessageEdit")),e.$emit("fetch"),e.$emit("close")})).catch((function(t){e.$toastr.e(t),console.log(t)}));else{if(!a)return void e.$toastr.e("Please add ROLE_ADMIN");e.user.role=a.id,h["a"].register(e.user).then((function(){e.$emit("fetch"),e.$emit("close"),e.$toastr.s(e.$t("successMessageCreate"))})).catch((function(t){console.log(t),e.$toastr.e(t)}))}}}))}})},g=_,b=a("2877"),y=Object(b["a"])(g,u,d,!1,null,null,null),C=y.exports,w={name:"Admin",components:{AdminCreate:C,FdmTable:o["a"],ModalDelete:l["a"]},data:function(){return{isCreate:!1,users:[],user:{},isEdit:!1,isDelete:!1,deleteId:0}},mounted:function(){this.fetchUsers()},methods:Object(i["a"])(Object(i["a"])({},Object(c["b"])("loader",["setLoading"])),{},{fetchUsers:function(){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function t(){var a,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.setLoading(!0),t.next=3,v["a"].getAll();case 3:if(a=t.sent,s=a.find((function(e){return"ROLE_ADMIN"===e.code})),s){t.next=8;break}return e.setLoading(!1),t.abrupt("return",e.$toastr.e("ROLE_ADMIN not found!"));case 8:p["a"].getAll(s.id).then((function(t){e.users=t,e.setLoading(!1)})).catch((function(t){e.setLoading(!1),console.log(t)}));case 9:case"end":return t.stop()}}),t)})))()},onCreate:function(){this.isEdit=!1,this.isCreate=!0},onEdit:function(e){this.isCreate=!0,this.isEdit=!0,this.user=e},onDelete:function(e){this.isDelete=!0,this.deleteId=e},deleteUser:function(){var e=this;this.setLoading(!0),p["a"].delete(this.deleteId).then((function(){e.setLoading(!1),e.fetchUsers(),e.isDelete=!1,e.$toastr.s(e.$t("successMessageDelete"))})).catch((function(t){e.setLoading(!1),e.$toastr.e(t),console.log(t)}))}})},x=w,k=Object(b["a"])(x,s,r,!1,null,null,null);t["default"]=k.exports},"28c3":function(e,t,a){e.exports=a.p+"img/error.bff6bafe.svg"},"589d":function(e,t,a){},"5bb7":function(e,t,a){"use strict";a.d(t,"a",(function(){return u}));a("99af");var s=a("d4ec"),r=a("bee2"),n=a("262e"),i=a("2caf"),o=a("a2a9"),l="http://46.101.136.60:8000/api",c=function(e){Object(n["a"])(a,e);var t=Object(i["a"])(a);function a(){return Object(s["a"])(this,a),t.call(this)}return Object(r["a"])(a,[{key:"getAll",value:function(){var e="".concat(l,"/airlines");return this.sendGetRequest(e)}},{key:"create",value:function(e){var t="".concat(l,"/airlines/");return this.sendPostRequest(t,e)}},{key:"getById",value:function(e){var t="".concat(l,"/airlines/").concat(e);return this.sendGetRequest(t)}},{key:"update",value:function(e){var t="".concat(l,"/airlines/").concat(e.id,"/");return this.sendPutRequest(t,e)}},{key:"delete",value:function(e){var t="".concat(l,"/airlines/").concat(e);return this.sendDeleteRequest(t)}}]),a}(o["a"]),u=new c},"5bc5":function(e,t,a){"use strict";a("0c61")},"63a0":function(e,t,a){},"76a4":function(e,t,a){e.exports=a.p+"img/add.c887fade.svg"},"86a0":function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("fdm-modal",{attrs:{type:"delete"}},[a("div",{staticClass:"delete",attrs:{slot:"content"},slot:"content"},[a("div",{staticClass:"delete__title"},[e._v(" Are you sure? ")]),a("div",{staticClass:"delete__buttons"},[a("button",{on:{click:function(t){return e.$emit("close")}}},[e._v(" Cancel ")]),a("button",{staticClass:"black",on:{click:function(t){return e.$emit("delete")}}},[e._v(" Delete ")])])])])},r=[],n=a("f0c9"),i={name:"ModalDelete",components:{FdmModal:n["a"]}},o=i,l=(a("aa43"),a("2877")),c=Object(l["a"])(o,s,r,!1,null,null,null);t["a"]=c.exports},"9ee9":function(e,t,a){"use strict";a("63a0")},aa43:function(e,t,a){"use strict";a("589d")},d59a:function(e,t,a){"use strict";a.d(t,"a",(function(){return d}));a("99af"),a("4fad");var s=a("3835"),r=a("d4ec"),n=a("bee2"),i=a("262e"),o=a("2caf"),l=a("a2a9"),c="http://46.101.136.60:8000/api",u=function(e){Object(i["a"])(a,e);var t=Object(o["a"])(a);function a(){return Object(r["a"])(this,a),t.call(this)}return Object(n["a"])(a,[{key:"getAll",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a="".concat(c,"/users/?role=").concat(e,"&airline=").concat(t);return this.sendGetRequest(a)}},{key:"create",value:function(e){var t="".concat(c,"/users/");return this.sendPostRequest(t,e)}},{key:"getById",value:function(e){var t="".concat(c,"/users/").concat(e);return this.sendGetRequest(t)}},{key:"update",value:function(e){for(var t=new FormData,a=0,r=Object.entries(e);a<r.length;a++){var n=Object(s["a"])(r[a],2),i=n[0],o=n[1];t.append(i,o)}var l="".concat(c,"/users/").concat(e.id,"/");return this.sendPutRequest(l,t)}},{key:"delete",value:function(e){var t="".concat(c,"/users/").concat(e);return this.sendDeleteRequest(t)}}]),a}(l["a"]),d=new u},daf0:function(e,t,a){e.exports=a.p+"img/edit.24a6c96e.svg"},f0c9:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"modal flex-center",attrs:{id:"modal"}},[a("div",{staticClass:"modal__content",class:{delete:"delete"===e.type,"auto-height":e.autoHeight,width:"fligthData"===e.type}},[e._t("content")],2)])},r=[],n={name:"FdmModal",props:{type:{type:String,default:""},autoHeight:{type:Boolean,default:!1}},data:function(){return{modal:""}},mounted:function(){this.modal=document.getElementById("modal"),this.modal.addEventListener("click",this.onOutsideClick)},beforeDestroy:function(){this.modal.removeEventListener("click",this.onOutsideClick)},methods:{onOutsideClick:function(e){e.target===this.modal&&this.$emit("close")}}},i=n,o=(a("9ee9"),a("2877")),l=Object(o["a"])(i,s,r,!1,null,null,null);t["a"]=l.exports},fa41:function(e,t,a){"use strict";var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("table",{staticClass:"fdm-table"},[a("thead",[e._t("head")],2),a("tbody",[e._t("body")],2)])},r=[],n={name:"FmdTable"},i=n,o=(a("5bc5"),a("2877")),l=Object(o["a"])(i,s,r,!1,null,null,null);t["a"]=l.exports}}]);
//# sourceMappingURL=chunk-c92a7730.7bd71f4b.js.map