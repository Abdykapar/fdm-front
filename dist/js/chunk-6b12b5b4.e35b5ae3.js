(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6b12b5b4"],{"04a4":function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));i("99af");var n=i("d4ec"),a=i("bee2"),s=i("262e"),c=i("2caf"),o=i("a2a9"),r="http://46.101.136.60:8000/api",l=function(t){Object(s["a"])(i,t);var e=Object(c["a"])(i);function i(){return Object(n["a"])(this,i),e.call(this)}return Object(a["a"])(i,[{key:"getAll",value:function(){var t="".concat(r,"/countries/");return this.sendGetRequest(t)}},{key:"create",value:function(t){var e="".concat(r,"/countries/");return this.sendPostRequest(e,t)}},{key:"getById",value:function(t){var e="".concat(r,"/countries/").concat(t);return this.sendGetRequest(e)}},{key:"update",value:function(t){var e="".concat(r,"/countries/").concat(t.id,"/");return this.sendPutRequest(e,t)}},{key:"delete",value:function(t){var e="".concat(r,"/countries/").concat(t);return this.sendDeleteRequest(e)}}]),i}(o["a"]),u=new l},"0c61":function(t,e,i){},"0d45":function(t,e,i){t.exports=i.p+"img/delete.9da4aae3.svg"},"28c3":function(t,e,i){t.exports=i.p+"img/error.bff6bafe.svg"},"589d":function(t,e,i){},"5bc5":function(t,e,i){"use strict";i("0c61")},"63a0":function(t,e,i){},"76a4":function(t,e,i){t.exports=i.p+"img/add.c887fade.svg"},"86a0":function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("fdm-modal",{attrs:{type:"delete"}},[i("div",{staticClass:"delete",attrs:{slot:"content"},slot:"content"},[i("div",{staticClass:"delete__title"},[t._v(" Are you sure? ")]),i("div",{staticClass:"delete__buttons"},[i("button",{on:{click:function(e){return t.$emit("close")}}},[t._v(" Cancel ")]),i("button",{staticClass:"black",on:{click:function(e){return t.$emit("delete")}}},[t._v(" Delete ")])])])])},a=[],s=i("f0c9"),c={name:"ModalDelete",components:{FdmModal:s["a"]}},o=c,r=(i("aa43"),i("2877")),l=Object(r["a"])(o,n,a,!1,null,null,null);e["a"]=l.exports},8930:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"city home__body"},[n("div",{staticClass:"home__body__head"},[n("span",[t._v("Cities")]),n("button",{staticClass:"flex-align-center",on:{click:t.onCreate}},[n("img",{attrs:{src:i("76a4"),alt:""}}),t._v(" Add new city ")])]),n("div",{staticClass:"home__body__main"},[n("fdm-table",[n("template",{slot:"head"},[n("tr",[n("th",{staticClass:"id"},[t._v("ID")]),n("th",[t._v("Title")]),n("th",[t._v("Short title")]),n("th"),n("th")])]),n("template",{slot:"body"},t._l(t.cities,(function(e,a){return n("tr",{key:e.id},[n("td",{staticClass:"id"},[t._v(t._s(a+1))]),n("td",[t._v(t._s(e.title))]),n("td",[t._v(t._s(e.short_title))]),n("td",[n("img",{staticClass:"pointer",attrs:{src:i("daf0"),alt:""},on:{click:function(i){return t.onEdit(e)}}})]),n("td",[n("img",{staticClass:"pointer",attrs:{src:i("0d45"),alt:""},on:{click:function(i){return t.onDelete(e.id)}}})])])})),0)],2)],1),t.isCreate?n("city-create",{attrs:{isEdit:t.isEdit,editCity:t.city},on:{close:function(e){t.isCreate=!1},fetch:t.fetchCity}}):t._e(),t.isDelete?n("modal-delete",{on:{close:function(e){t.isDelete=!1},delete:t.deleteCity}}):t._e()],1)},a=[],s=i("5530"),c=i("fa41"),o=i("ab47"),r=i("86a0"),l=i("2f62"),u=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("fdm-modal",{on:{close:function(e){return t.$emit("close")}}},[n("div",{staticClass:"create",attrs:{slot:"content"},slot:"content"},[n("div",{staticClass:"create__head"},[t._v(" "+t._s(t.isEdit?"Edit city":"Add new city")+" ")]),n("div",{staticClass:"create__body"},[n("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.onSubmit(e)}}},[n("div",{staticClass:"form__row",class:{error:t.errors.has("title")}},[n("label",{attrs:{for:"title"}},[t._v("Title")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.city.title,expression:"city.title"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"title",type:"text",name:"title"},domProps:{value:t.city.title},on:{input:function(e){e.target.composing||t.$set(t.city,"title",e.target.value)}}}),t.errors.length?[n("img",{attrs:{src:i("28c3"),alt:""}}),n("span",[t._v("Required field")])]:t._e()],2),n("div",{staticClass:"form__row",class:{error:t.errors.has("short")}},[n("label",{attrs:{for:"shortTitle"}},[t._v("Short title")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.city.short_title,expression:"city.short_title"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"shortTitle",name:"short",type:"text"},domProps:{value:t.city.short_title},on:{input:function(e){e.target.composing||t.$set(t.city,"short_title",e.target.value)}}}),t.errors.length?[n("img",{attrs:{src:i("28c3"),alt:""}}),n("span",[t._v("Required field")])]:t._e()],2),n("div",{staticClass:"form__row",class:{error:t.errors.has("country")}},[n("label",{attrs:{for:"country"}},[t._v("Country")]),n("select",{directives:[{name:"model",rawName:"v-model",value:t.city.country,expression:"city.country"},{name:"validate",rawName:"v-validate",value:"required",expression:"'required'"}],attrs:{id:"country",name:"country"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.city,"country",e.target.multiple?i:i[0])}}},t._l(t.countries,(function(e){return n("option",{key:e.id,domProps:{value:e.id}},[t._v(" "+t._s(e.title)+" ")])})),0)]),n("div",{staticClass:"form__submit flex-justify-between"},[n("button",{attrs:{type:"submit"}},[t._v(" ADD ")]),n("button",{staticClass:"black",attrs:{type:"cancel"},on:{click:function(e){return t.$emit("close")}}},[t._v(" DECLINE ")])])])])])])},d=[],f=i("f0c9"),v=i("04a4"),h={name:"CityCreate",components:{FdmModal:f["a"]},props:{isEdit:{type:Boolean,default:!1},editCity:{type:Object,default:function(){return{}}}},data:function(){return{city:{},countries:[]}},mounted:function(){this.isEdit&&(this.city=Object(s["a"])({},this.editCity)),this.fetchCountries()},methods:Object(s["a"])(Object(s["a"])({},Object(l["b"])("loader",["setLoading"])),{},{fetchCountries:function(){var t=this;this.setLoading(!0),v["a"].getAll().then((function(e){t.countries=e,t.setLoading(!1)})).catch((function(e){t.setLoading(!1),console.log(e)}))},onSubmit:function(){var t=this;this.$validator.validate().then((function(e){e&&(t.isEdit?o["a"].update(t.city).then((function(){t.$toastr.s(t.$t("successMessageEdit")),t.$emit("fetch"),t.$emit("close")})).catch((function(e){t.$toastr.e(e),console.log(e)})):o["a"].create(t.city).then((function(){t.$emit("fetch"),t.$emit("close"),t.$toastr.s(t.$t("successMessageCreate"))})).catch((function(e){console.log(e),t.$toastr.e(e)})))}))}})},m=h,y=i("2877"),_=Object(y["a"])(m,u,d,!1,null,null,null),p=_.exports,b={components:{CityCreate:p,FdmTable:c["a"],ModalDelete:r["a"]},name:"City",data:function(){return{isCreate:!1,cities:[],city:{},isEdit:!1,isDelete:!1,deleteId:0}},mounted:function(){this.fetchCity()},methods:Object(s["a"])(Object(s["a"])({},Object(l["b"])("loader",["setLoading"])),{},{fetchCity:function(){var t=this;this.setLoading(!0),o["a"].getAll().then((function(e){t.setLoading(!1),t.cities=e})).catch((function(e){t.setLoading(!1),console.log(e)}))},onCreate:function(){this.isEdit=!1,this.isCreate=!0},onEdit:function(t){this.isCreate=!0,this.isEdit=!0,this.city=t},onDelete:function(t){this.isDelete=!0,this.deleteId=t},deleteCity:function(){var t=this;this.setLoading(!0),o["a"].delete(this.deleteId).then((function(){t.setLoading(!1),t.fetchCity(),t.isDelete=!1,t.$toastr.s(t.$t("successMessageDelete"))})).catch((function(e){t.setLoading(!1),t.$toastr.e(e),console.log(e)}))}})},g=b,C=Object(y["a"])(g,n,a,!1,null,null,null);e["default"]=C.exports},"9ee9":function(t,e,i){"use strict";i("63a0")},aa43:function(t,e,i){"use strict";i("589d")},ab47:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));i("99af");var n=i("d4ec"),a=i("bee2"),s=i("262e"),c=i("2caf"),o=i("a2a9"),r="http://46.101.136.60:8000/api",l=function(t){Object(s["a"])(i,t);var e=Object(c["a"])(i);function i(){return Object(n["a"])(this,i),e.call(this)}return Object(a["a"])(i,[{key:"getAll",value:function(){var t="".concat(r,"/cities/");return this.sendGetRequest(t)}},{key:"create",value:function(t){var e="".concat(r,"/cities/");return this.sendPostRequest(e,t)}},{key:"getById",value:function(t){var e="".concat(r,"/cities/").concat(t);return this.sendGetRequest(e)}},{key:"update",value:function(t){var e="".concat(r,"/cities/").concat(t.id,"/");return this.sendPutRequest(e,t)}},{key:"delete",value:function(t){var e="".concat(r,"/cities/").concat(t);return this.sendDeleteRequest(e)}}]),i}(o["a"]),u=new l},daf0:function(t,e,i){t.exports=i.p+"img/edit.24a6c96e.svg"},f0c9:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"modal flex-center",attrs:{id:"modal"}},[i("div",{staticClass:"modal__content",class:{delete:"delete"===t.type,"auto-height":t.autoHeight,width:"fligthData"===t.type}},[t._t("content")],2)])},a=[],s={name:"FdmModal",props:{type:{type:String,default:""},autoHeight:{type:Boolean,default:!1}},data:function(){return{modal:""}},mounted:function(){this.modal=document.getElementById("modal"),this.modal.addEventListener("click",this.onOutsideClick)},beforeDestroy:function(){this.modal.removeEventListener("click",this.onOutsideClick)},methods:{onOutsideClick:function(t){t.target===this.modal&&this.$emit("close")}}},c=s,o=(i("9ee9"),i("2877")),r=Object(o["a"])(c,n,a,!1,null,null,null);e["a"]=r.exports},fa41:function(t,e,i){"use strict";var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("table",{staticClass:"fdm-table"},[i("thead",[t._t("head")],2),i("tbody",[t._t("body")],2)])},a=[],s={name:"FmdTable"},c=s,o=(i("5bc5"),i("2877")),r=Object(o["a"])(c,n,a,!1,null,null,null);e["a"]=r.exports}}]);
//# sourceMappingURL=chunk-6b12b5b4.e35b5ae3.js.map